# GPU

GPU (Graphics Processor Unit) рисует двухмерные примитивы в видеопамяти и выводит картинку на TV.

Дополнительно GPU занимается мастерингом видеосигнала (например управляет Color Burst), хотя непосредственно генерацию видеосигнала производит отдельная микросхема-ЦАП, на базе цифровых выходных сигналов RGB, идущих с GPU.

Управление GPU со стороны CPU осуществляется всего двумя IO-портами `GP0` и `GP1`, а также DMA, для передачи дисплейных списков (display lists, DL).

GPU построен по такой же технологии, что и CPU (standard cells + custom blocks):

|![GPU_chip_lowres](/wiki/imgstore/GPU_chip_lowres.jpg)|![GPU_standard_cells](/wiki/imgstore/GPU_standard_cells.jpg)|
|---|---|

- Старые версии материнок (PU-7 и старые PU-8) использовали 2 чипа GPU: 160pin CXD8514Q (IC203) и 64pin CXD2923AR (IC207). Одна из них занималась рисованием примитивов (более крупная 160-контактная), а вторая очевидно выводом картинки из видеопамяти на ТВ (64-контактная). Мануалов у нас нет, поэтому узнать точнее можно только по фотографиям материнской платы (отследить дорожки).
- Все остальные версии использовали 208pin версии GPU, индекс остался прежним - IC203.

|PCB|PU-7 / older PU-8|newer PU-8|PU-18|PU-20|PU-22|PU-23|PM-41|PM-41(2)|
|---|---|---|---|---|---|---|---|---|
|IC203|![PU7_gpu_package](/wiki/imgstore/PU7_gpu_package.jpg)|![NewPU8_gpu_package](/wiki/imgstore/NewPU8_gpu_package.jpg)|![PU18_gpu_package](/wiki/imgstore/PU18_gpu_package.jpg)|???|![PU22_gpu_package](/wiki/imgstore/PU22_gpu_package.jpg)|![PU23_gpu_package](/wiki/imgstore/PU23_gpu_package.jpg)|![PM41_gpu_package](/wiki/imgstore/PM41_gpu_package.jpg)|![PM412_gpu_package](/wiki/imgstore/PM412_gpu_package.jpg)|
|CXD|8514Q/2923AR|8561Q|8561BQ|???|8561CQ|8561CQ|8561CQ|???|

## Аппаратный интерфейс (старый GPU 160-pin)

Cтарый GPU состоящий из двух чипов (CXD 8514Q/2923AR) работает следующим образом:

- Интерфейс между GPU и CPU не претерпел изменений в последующих версиях.
- Большая микросхема CXD 8514Q (160 контактов) занимается отрисовкой примитивов в специальную двух-портовую DRAM. Соответственно она также содержит DRAM Refresh логику. Картина немного усложняется тем, что VRAM поделена на два банка (2 микросхемы).
- Маленькая микросхема CXD 2923AR (64 контакта) занимается выборкой пикселей из VRAM и представляет собой RGB DAC
